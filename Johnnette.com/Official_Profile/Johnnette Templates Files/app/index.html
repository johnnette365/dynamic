{% extends 'base.html' %}
{% load static %}
{% block title %}Home{% endblock title %}


{% comment %} {% block google_analytics %}
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-248379699-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-248379699-1');
</script>
{% endblock google_analytics %} {% endcomment %}



{% block meta_tags %}
<meta name="keywords" content="johnnette jf-2, johnnette jf-3 vtol, johnnette jf-4, drone manufacturing, make in india, multi rotor drone, fixed-wing drones, reliable and high quality drones at lower cost, unmanned aerial vehicle, mapping drone, surveillance drone, drone, Defence, drone for Defence">
<meta name="description" content="johnnette Technologies is a drone manufacturer company, developing drone solution for a variety of applications, unmanned aerial vehicle, manufacturing drone for military, reliable and high quality drones at low cost">
{% endblock meta_tags %}



{% block head %}
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- custom css file link -->
<link rel="stylesheet" href="{% static 'css/index.css' %}">

{% endblock head %}
    


{% block page_css %}

{% endblock page_css %}



{% block content %}
    <!--============ main section =============-->
    {% for product in product %}
        <section class="box_container on_screen">
            {% if product.product_home_page_desktop_image %}
            <div class="background jf5" id="image1" style="background-image: url({{ product.product_home_page_desktop_image.url }}); background-position: 85% center;"></div>
            {% endif %}
            {% if product.product_home_page_mobile_image %}
            <div class="background jf5" id="image2" style="background-image: url({{ product.product_home_page_mobile_image.url }}); background-position: 50% center;"></div>
            {% endif %}
            <div class="bottom_content">
                <h1 class="content_header">JOHNNETTE {{ product.product.product_name }}</h1>
                <h4 class="content_sub_header">
                    {{ product.product_description }}
                </h4>
                <a href="{% url 'product' product.id %}" class="content_button">
                    <span class="text">Know more</span>
                    <div class="hover"></div>
                </a>
            </div>
        </section>
    {% endfor %}

    <div class="container" id="count-container">
        <div class="row">
            <div class="col-sm">
                <p style="text-align: center; font-size: 70px; font-weight: bold" id='0101' class="text-light">73</p>
                <p style="text-align: center; font-size: 21px" class="text-light">Total Drones & Robots Delivered</p>
            </div>
            <div class="col-sm">
                <p style="text-align: center; font-size: 70px; font-weight: bold" id='0102' class="text-light">07</p>
                <p style="text-align: center; font-size: 21px" class="text-light">Worldwide Presence</p>
            </div>
            <div class="col-sm">
                <p style="text-align: center; font-size: 70px; font-weight: bold" class="text-light"><span id='0103'>3500</span>
                </p>
                <p style="text-align: center; font-size: 21px" class="text-light align-content-center">Global Drone Pilots Trained</p>
            </div>
            <div class="col-sm">
                <p style="text-align: center; font-size: 70px; font-weight: bold" class="text-light"><span id='0104'>40</span>
                </p>
                <p style="text-align: center; font-size: 21px" class="text-light align-content-center">Government Contracts</p>
            </div>
        </div>
    </div>

    <style>
        #count-container {
            margin-bottom: 50px;
        }
        
        @media screen and (max-width: 1440px) {
            #count-container {
                margin-bottom: 40px;
            }
        }
        
        @media screen and (max-width: 540px) {
            #count-container .row .col-sm {
                margin-top: 20px;
            }
            #count-container {
                margin-bottom: 70px;
            }
        }
    </style>
    <!--======x====== end of main section ========x=====-->
    
{% endblock content %}



{% block page_js %}
    <!-- javascript code -->
    <script>
        const box = document.querySelectorAll('.box_container');

        const boxObserver = new IntersectionObserver((entries) => {
            const ON_SCRENN = 'on_screen'
            entries.forEach(entry => {
                const {
                    isIntersecting,
                    target
                } = entry

                if (isIntersecting) {
                    target.classList.add(ON_SCRENN)
                    return true
                }
                target.classList.remove(ON_SCRENN)
            })
        }, {
            threshold: 0.5,
        })

        box.forEach((box) => {
            boxObserver.observe(box)
        })
    </script>


    <script>
        function animate(obj, initVal, lastVal, duration) {
            let startTime = null;

            //get the current timestamp and assign it to the currentTime variable
            let currentTime = Date.now();

            //pass the current timestamp to the step function
            const step = (currentTime) => {

                //if the start time is null, assign the current time to startTime
                if (!startTime) {
                    startTime = currentTime;
                }

                //calculate the value to be used in calculating the number to be displayed
                const progress = Math.min((currentTime - startTime) / duration, 1);

                //calculate what to be displayed using the value gotten above
                obj.innerHTML = Math.floor(progress * (lastVal - initVal) + initVal);

                //checking to make sure the counter does not exceed the last value (lastVal)
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    window.cancelAnimationFrame(window.requestAnimationFrame(step));
                }
            };
            //start animating
            window.requestAnimationFrame(step);
        }
        let text1 = document.getElementById('0101');
        let text2 = document.getElementById('0102');
        let text3 = document.getElementById('0103');
        let text4 = document.getElementById('0104');
        const load = () => {
            animate(text1, 0, 73, 7000);
            animate(text2, 00, 7, 7000);
            animate(text3, 0, 3500, 7000);
            animate(text4, 0, 40, 7000);
        }
    </script>
{% endblock page_js %}